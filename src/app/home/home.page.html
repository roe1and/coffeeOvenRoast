
<ion-header>
  <ion-toolbar class="header">
    <ion-buttons slot="start">
      <ion-menu-button autoHide="false"></ion-menu-button>
    </ion-buttons>
    <ion-list>
      <ion-item>
        <ion-label>Recipe</ion-label>
        <ion-select
          interface="popover" 
          placeholder="Please select"
          (ionChange)="setRecipe($event)">
          <ion-select-option 
            *ngFor="let recipe of recipes; let i = index"
            value="{{recipe.id}}"
            mode="md">
              {{recipe.name}} ({{recipe.variant}})
          </ion-select-option>
        </ion-select>
      </ion-item>
    </ion-list>
  </ion-toolbar>
</ion-header>
<ion-content class="content" padding *ngIf="showcontent">

  <div *ngIf="current_recipe">
    <ion-slides 
      pager="true" 
      [options]="slideOpts">
      <ion-slide class="ion-activatable" 
        *ngFor="let interval of current_recipe[0].intervals; let i = index">
          <span *ngIf="time_remain > 0">{{ time_remain | minuteSeconds }}</span>{{ interval | minuteSeconds }}, Roasting phase {{ i + 1 }}
      </ion-slide>
    </ion-slides>
  </div>







  <ion-fab vertical="bottom" horizontal="end" slot="fixed" [id]="reset_id">
    <ion-fab-button [color]="color" (click)="resetTimer()">
      <ion-icon name="refresh-circle"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <!--
  <div *ngIf="current_recipe">
  <ion-grid *ngFor="let interval of current_recipe[0].intervals; let i = index">
    
    <ion-row class="ion-activatable">
      <ion-col>
        <ion-card (click)="!clickable && startTimer(interval)" >
            <ion-ripple-effect></ion-ripple-effect>
            <ion-card-content>
            </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
  </div>
  -->
  <!--
    <ion-row class="ion-activatable">
      <ion-col>
        <ion-card 
          (click)="!disable_click_p1 && startTimer1(interval)" 
          [ngClass]="{
          'card1-done': p1_done
          }">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-card-header [hidden]="hide_p1">
            <ion-card-subtitle>Phase 1</ion-card-subtitle>
            <ion-card-title>{{p1}} {{interval}}</ion-card-title>
          </ion-card-header>
        
          <ion-card-content>
            <ion-progress-bar [hidden]="hide_p1" *ngIf="start_p1" value="{{percent1}}"></ion-progress-bar>
            <div [hidden]="hide_p1" *ngIf="start_p1">
              <span>Time remaining: {{m}}:{{s | number:'2.0-0'}}</span>
            </div>
            <div [hidden]="!hide_p1" class="done"><p>Done</p></div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
    -->
    <!--
    <ion-row class="ion-activatable">
      <ion-col>
        <ion-card 
          (click)="!disable_click_p2 && startTimer2(180)" 
          [ngClass]="{
          'card2-done': p2_done
          }">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-card-header [hidden]="hide_p2">
            <ion-card-subtitle>Phase 2</ion-card-subtitle>
            <ion-card-title>{{p2}}</ion-card-title>
          </ion-card-header>
        
          <ion-card-content>
            <ion-progress-bar [hidden]="hide_p2" value="{{percent2}}"></ion-progress-bar>
            <div [hidden]="!hide_p2" class="done"><p>Done</p></div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row class="ion-activatable">
      <ion-col>
        <ion-card 
          (click)="!disable_click_p3 && startTimer3(180)" 
          [ngClass]="{
          'card3-done': p3_done
          }">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-card-header [hidden]="hide_p3">
            <ion-card-subtitle>Phase 3</ion-card-subtitle>
            <ion-card-title>{{p3}}</ion-card-title>
          </ion-card-header>
        
          <ion-card-content>
            <ion-progress-bar [hidden]="hide_p3" value="{{percent3}}"></ion-progress-bar>
            <div [hidden]="!hide_p3" class="done"><p>Done</p></div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row class="ion-activatable">
      <ion-col>
        <ion-card 
          (click)="!disable_click_p4 && startTimer4(180)" 
          [ngClass]="{
          'card4-done': p4_done
          }">
          <ion-ripple-effect></ion-ripple-effect>
          <ion-card-header [hidden]="hide_p4">
            <ion-card-subtitle>Phase 4</ion-card-subtitle>
            <ion-card-title>{{p4}}</ion-card-title>
          </ion-card-header>
        
          <ion-card-content>
            <ion-progress-bar [hidden]="hide_p4" value="{{percent4}}"></ion-progress-bar>
            <div [hidden]="!hide_p4" class="done"><p>Done</p></div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

  </ion-grid>
    -->
  <ion-fab [hidden]="overtime_button" vertical="bottom" horizontal="start" slot="fixed">
    <ion-fab-button>
      <ion-icon name="arrow-dropup"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-button (click)="addTime(180)">3 minutes</ion-button>
      <ion-button (click)="addTime(120)">2 minutes</ion-button>
      <ion-button (click)="addTime(60)">1 minute</ion-button>
      <ion-button (click)="addTime(10)">10 seconds</ion-button>
    </ion-fab-list>
  </ion-fab>
  <ion-fab [hidden]="overtime" vertical="center" horizontal="center" slot="fixed">
      <ion-fab-button>
        {{m}}:{{s | number:'2.0-0'}}
      </ion-fab-button>
    </ion-fab>
</ion-content>
